>変数一覧 
golden_ratio
ウィンドウサイズを設定する上で使用する変数(今回は1.618)
---  
size_height
ウィンドウサイズを設定する上で使用する変数(今回は1000)
---  
lv01_golden
ウィンドウサイズを設定する上で使用する変数(今回は618)
---  
lv02_golden
ウィンドウサイズを設定する上で使用する変数(今回は382)
---  
lv03_golden
ウィンドウサイズを設定する上で使用する変数(今回は236)
---  
gg、ff
引数として使うPGraphics型の変数
---  
large_r
カラーパレットでの色相を選択する部分の外側の円の半径
---
small_r
カラーパレットでの色相を選択する部分の内側の円の半径
---  
r01
引数として使用するfloat型の変数(主にlarge_rを代入して使用)
---  
r02
引数として使用するfloat型の変数(主にsmall_rを代入して使用)
---  
color_hue
引数として使用するfloat型の変数(主にselectColorを代入して使用)
---  
separate_squareOneSide
カラーパレット(正方形部分)を分割した際の１辺の長さを取る変数
---  
start_separate_coordinate
カラーパレット(正方形部分)を分割した際に出来る図形を書くうえで座標指定するときに使う長さ
---  
change_saturation
カラーパレット(正方形部分)を分割し彩度の変化具合を調整する変数
---  
change_brightness
カラーパレット(正方形部分)を分割し明度の変化具合を調整する変数
---  
gg_pallet_center_x
カラーパレット(ドーナツ型部分)での座標情報から色情報を取り出す際に、その座標を感知するのに使用する変数
---  
gg_pallet_center_y
カラーパレット(ドーナツ型部分)での座標情報から色情報を取り出す際に、その座標を感知するのに使用する変数
---  
gg_pallet_squareOneSide
カラーパレット(正方形部分)での座標情報から色情報を取り出す際に、その座標を感知するのに使用する変数
---  






>関数一覧  
makeWindow()
ウィンドウサイズの設定をする関数
---  
makeWindow_setup01(PGraphics gg)
背景色を作成する関数
---  
makeColorpallet(PGraphics gg)
カラーパレットを作成する関数
---  
makeColorpallet_draw01(gg, large_r, small_r)
カラーパレットでの色相を選択する部分(今回だとドーナツ型部分)を作成する関数
---  
makeColorpallet_draw02(gg, small_r, 0)
カラーパレットでの明度、彩度を選択する部分(今回だと正方形)を作成する関数
---  
 >本文説明(カラーパレット)
1行目よりcanvasとpalletというウィンドウをPgraphics型で宣言する。
canvasは今回のお絵かきアプリでのイラストを描く部分(紙)であり、palletは色を選択することのできるカラーパレットの部分である。

3～9行目は、それぞれのウィンドウを作成する上で必要となってくる比の値である。
int lv01_golden=618、int lv02_golden=382、int lv03_golden=236の値をとる。

11行目のcolor selectColorは、型がcolor、変数がselectColorであり、関数を超えても使えるようにしたいのでここで記述する。

15行目は全体のウィンドウサイズを1618×1000で作成している。

16行目では、RGBからHSBに変更している。カラーパレットで色を取る際にHSBのほうが直観的に色を選択できるため、このvoid setup内でRGB→HSBに変更している。

18行目でのmakeWindow()という自作関数では詳細が24～26行目に書いてある。ここではcanvasウィンドウを1000×1000で、palletウィンドウを382×382で取るように指定した。

19行目でのmakeWindow_setup01()という自作関数では詳細が30～35行目に書いてある。ここでは背景色を選択する関数を作っている。実際に19行目で関数でのPGraphicsに当たる部分にはcanvasを、color base_colorに当たる部分にはcolor(0, 0, 100)という色情報を入れることによりcanvasウィンドウの背景色を白に設定することができる。

20行目でのmakeColorpallet()という自作関数では詳細が37～49行目に書いてある。この関数ではカラーパレットの色相を変化させる部分(ドーナツ型部分)と、彩度・明度を変化させる部分(正方形)についてのプログラムを行っている。38行目のint squareOneSideはカラーパレットウィンドウの1辺の長さ、39行目のfloat large_rは大きい円の半径、40行目のfloat small_rは小さいほうの円の半径の値を示している。42～48行目はPGraphics型の変数にどのような情報があるのかを示しており、上から、カラーモード、(0,0)を指定したウィンドウの左上の頂点に変更、変更した(0,0)の座標を指定した場所に変更、色相を変化させる部分の図形について(ドーナツ型部分)、彩度・明度を変化させる部分の図形について(正方形部分)書かれている。
46行目、47行目にはまた自作関数が埋め込まれているのでその2つの新しく出てきた関数の詳細を見ていこうと思う。

46行目でのmakeColorpallet_draw01()という自作関数はドーナツ型部分の図形がどのように書かれているのかがプログラムされている。
ざっくりどのように書かれているかというと、まずは中心角が1度のおうぎ形を360個描画する。その後その360個作成したおうぎ形に360種類の色を1つずつ繰り返しで塗りつぶしている。
では50～62行目で詳細を見ていこう。
まずは51行目で中心角の大きさをおく変数を作成する。今回は上でも書いた通り360分割したいため中心角の数字が1になるようTWO_PI/360と置かれている。
52行目では、54行目で書いている四角形(ウィンドウの枠)の枠線を消している。
53、54行目ではドーナツ型の後ろの余白(背景)を灰色で塗りつぶしている。
55行目では、56行目から書くおうぎ形1つ1つの枠線を消し、色選択での型地上での境界線をなくしている。
56～59行目では0～1度、1～2度……359～360といったように1度ずつ、かつ色相を1つずつずらし描画している。
最後に60～61行目では、中心に白で塗りつぶした円を描画することにより見かけ上カラーパレットがドーナツ型になる。

47行目でのvoid makeColorpallet_draw02()という自作関数は正方形部分の図形がどのように書かれているのかがプログラムされている。
63～74行目でこの関数の詳細が書かれているので見ていこう。
まず64行目ではカラーパレット(正方形部分)をどれだけの個数で区切るのかをint separateで表している。今回は50×50にしてあるが下の関数がこれを基準に作成しているので5に変えれば5×5といったように変更が可能である。
65行目では、カラーパレット(正方形部分)をint separateで入れた数分分け、その分けて出来た小さい正方形の1辺の長さを示している。
また67行目では、カラーパレット(正方形部分)の1辺の半分の長さを示している。
この二つの値は、int separateの数字によって分けられて出来た小さい正方形を配置する座標情報(74行目)で使用する。
どのように使われているかというと69～74行目で、for文を使いカラーパレットの正方形部分を左上から順に描画している。(今回だと縦1列50個の箱を50列分)
書く場所を1つずらすとともに73行目ではそれに対応する色を1つずつ変化させ、彩度・明度の違いを作っている。

79行目にあるmakeWindow_show()の自作関数では今作成したcanvas(絵を描く部分)とpallet(カラーパレット部分)をどこに配置するのかを設定している。
今回だとcanvasは(0,0)から、palletは(1000,618)から配置され描画されている。

ここまででキャンバス、カラーパレットの描画・配置は完了したので、ここからはどのような座標で色を選択できるのか、その選んだ色で書くことができるのかという範囲指定をしていこうと思う。

85～87行目では今回の範囲指定に使用する値を設定している。
85行目はパレットウィンドウのx座標を、86行目はパレットウィンドウのy座標を、87行目はカラーパレット(正方形部分)の1辺の半分の値を示している。
89～96行目ではマウスの座標がカラーパレット(正方形部分)に入っている場合の色の取り方を示している。
92～95行目の条件式を見ていくと、x座標はカラーパレット(正方形部分)の左側の辺から右側の辺までを指定しており、y座標はカラーパレット(正方形部分)の上側の辺から下側の辺までを指定している。

99～106行目ではマウスの座標がカラーパレット(ドーナツ型部分)に入っている場合の色の取り方を示している。
今回は色相を選ぶ際の図形がドーナツ型ということもあり範囲指定を、中心からの距離間で指定するようにしている。
99～100行目を見ていくと、今マウスを置いている座標がカラーパレット(ドーナツ型)の中心からの距離よりも内円の半径のほうが小さく、かつ外円の半径のほうが大きい場合に色情報を取ることができるようにプログラムされている。

 また102～106行目では、その色をカラーパレット(正方形部分)に反映させたいため、先ほど選択した色相をmakeColorpallet_draw02()に渡し描画させる。
 
 ---
 >本文内容(消しゴム、ペンの太さ変更)  
まずは12～13行目で、ペンと消しゴムの太さをfloat型の変数としておく。
15行目のboolean ers_changeではboolean型の変数としておく。これは後のペンで書くモードか消しゴムで消すモードかを判定するのに使用する。

141～170行目ではウィンドウでのどの領域をクリックすればペンor消しゴムのモードになるのかを設定している。
143～146行目では、領域1をクリックしたときの機能を使用できる。この部分はers_change = falseなのでペン機能を使うことを示しておりペンの太さは5である。
147～150行目では、領域2をクリックしたときの機能を使用できる。この部分はers_change = falseなのでペン機能を使うことを示しておりペンの太さは20である。
151～154行目では、領域3をクリックしたときの機能を使用できる。この部分はers_change = falseなのでペン機能を使うことを示しておりペンの太さは50である。
156～159行目では、領域4をクリックしたときの機能を使用できる。この部分はers_change = trueなので消しゴム機能を使うことを示しており消しゴムの太さは１である。
161～164行目では、領域4をクリックしたときの機能を使用できる。この部分はers_change = trueなので消しゴム機能を使うことを示しており消しゴムの太さは10である。
166～169行目では、領域4をクリックしたときの機能を使用できる。この部分はers_change = trueなので消しゴム機能を使うことを示しており消しゴムの太さは50である。

225～237行目では、上で作成した消しゴム機能もしくはペン機能をキャンバス部分にのみかけるよう条件付けされている。
まずif文の条件付けで現在のマウス座標と、1フレーム前のマウス座標がキャンバス内にあることを設定する。
そののちers_changeがtrueなら白(キャンバス背景色と同じ色)で、falseならペン機能でラインを引くようにプログラムしている。

---  
>本文内容(保存) 
保存方法としてはCtrl+sでキャンバスに書いた画像を.pngとして保存する。
まずは25～26行目でint型の変数とString型の変数を置く。これはイメージを保存する上でファイル名に区別をつけるために使用する。

239～257行目で、特定のキーを押した場合に動作するようにプログラムできる関数を使用している。
今回はまずdownCtrlがtrueになると、249行目のif内条件が満たせるようになっている。
それを満たしかつ257行目のsも同時に押せた場合のみ258行目以降の動作が実行されるようになっている。

では258行目以降の動きを見ていくと、この内容内で一番初めに設定した変数に役割を持たせていく。
int型の変数は、上から時間関係の、年・月・日・時間・分・秒と設定されている。
String型の変数はdayStringが(年…4桁表示,月…2桁表示,日にち…2桁表示)、timeStringが(時間…2桁表示,分…2桁表示,秒…2桁表示)となっている。
266行目では選択した領域の画像をとり、指定したファイル名で保存するようにしている。今回だとキャンバス部分を指定しており、ファイル名はimage_年(4桁)月(2桁)日にち(2桁)時間(2桁)分(2桁)秒(2桁).pngで保存される。
  
---  
>本文内容(undo、redo)  
戻るはCtrl+zを、進むではCtrl+Shift+zを入力した場合に実行するようなプログラムを作成していく。
17～21行目で、まず17行目よりPImage型の配列を宣言している。名前はstepImgとする。
18行目ではint型の変数stepImgNumberを置いており15としているのは、今回のプログラムでは15個の配列を作成するという意味の元使用する。
19行目では戻れる回数、進める回数をカウントする変数である。
20行目の変数は実際にどの配列番号の画像を抽出するかを指定するために用いる変数である。
21行目では、キャンバスに変化が見られたかを考える変数なのでboolean型にしてある。

38～39行目、104～108行目では、stepImgに配列の個数を宣言し、配列に初期イメージ(キャンバス白)を代入している。

109～114行目では、キャンバスに変更が見られた場合に実行される関数である。
具体的のどのような動きをするかというと配列に画像を一時保存する。
詳細は戻ることができる回数を+1、勧めむことができる回数を0にする。110行目でminを使用しているのはbackCountが14を超えた数値を取らないようにするためである。
112行目のstepImgCount_add()関数は配列番号を1つ増やす動きをしている。配列番号を1つ増やさないと、キャンバスにて変更が加わった場合に上書き保存されてしまうからだ。
この関数の詳細は、131～132行目にある。
113行目で、さっき設定したstepImgCountを使用し、変更が加わったキャンバスデータを配列に一時保存している。

115～122行目での自作関数undo()では、戻る上で使用する関数である。
詳細を見ていくとif文の条件より、戻ることの出来る回数(backCount)が0回よりも多いときに使用可能であり、1つ戻る動作なのでbackCountの値を1つ減らしforwardCountの値を1つ増やす。
その後、stepImgCount_sub()より配列の参照番号を-1し、その配列番号に保存されているイメージをキャンバスに貼りつける。

123～130行目での自作関数redo()では、進む上で使用する関数である。
詳細を見ていくとif文の条件より、進むことの出来る回数(forwardCount)が0回よりも多いときに使用可能であり、1つ進む動作なのでforwardCountの値を1つ減らしbackCountの値を1つ増やす。
その後、stepImgCount_add()より配列の参照番号を+1し、その配列番号に保存されているイメージをキャンバスに貼りつける。

stepImgCount_add()、stepImgCount_sub()で計算式に%を使用しているのは、stepImgNumber(今回だと15)の値を超えないようにするためである。

177～185行目では実際にundo、redo機能をウィンドウ内でのボタンとして動作させるためのプログラムである。
if文内の条件式よりundoは領域8で、redoは領域7をマウスでクリックすれば使用できるようになっている。

186～200行目では、boolean型のchangeCanvasがどのようなときにtrueになり、キャンバスの変更を確認するか、またどこからどこまでの動きを1つの動きとするかを示している。基本はmousePressed()で事足りるが、キャンバス外から押したままキャンバス内に入ってきた場合に対応できないためmouseDragged()でキャンバス外からの動きにも対応できるようにした。
では、1つの動きが判定出来たところで、196～200行目よりchangeCanvasがtrueからfalseに変わるタイミングでキャンバス情報を保存している。

---  
>本文内容(キャンバスの新規作成)
Ctrl+Shift+a+dを押すことでキャンバスの新規作成を行う。

まず23行目でboolean型の変数downCtrl、downShift、downAを置く。
245～258行目より、Ctrl、Shift、aいずれかを押しっぱなしの状態にしていることでtrueに変化する。
そして、259行目と279行目よりCtrl、Shift、aをすべて押しているときに、280行目より追加でdを押したときにキャンバスを新規に作成する。
具体的には、白いキャンバスを用意しundo、redoに関する変数を初期値に戻す。











